{"version":3,"sources":["helpers/idb.js","assets/images/logo-nb.png","../node_modules/encoding/lib sync","helpers/indexedDB.js","helpers/sort.js","containers/PostsContainer.jsx","helpers/firebase.js","helpers/colors.js","components/LikeCounter.jsx","helpers/formatData.js","components/PostCard.jsx","components/BottomAppNavigation.jsx","components/Navigation.jsx","layouts/Home.jsx","containers/UserPostsContainer.jsx","layouts/Profile.jsx","helpers/imageFiles.js","components/CapturePhoto.jsx","components/AddInfo.jsx","components/AddFile.jsx","layouts/AddPost.jsx","components/ScrollToTop.jsx","layouts/Login.jsx","containers/PostContainer.jsx","components/PostActions.jsx","layouts/Post.jsx","helpers/urlBaseToUint.js","components/PushToggle.jsx","layouts/Settings.jsx","components/PrivateRoute.jsx","components/Loading.jsx","App.jsx","index.js"],"names":["promisifyRequest","request","Promise","resolve","reject","onsuccess","result","onerror","error","promisifyRequestCall","obj","method","args","p","apply","then","proxyProperties","ProxyClass","targetProp","properties","forEach","prop","Object","defineProperty","prototype","get","this","set","val","proxyRequestMethods","Constructor","arguments","proxyMethods","proxyCursorRequestMethods","value","Cursor","promisifyCursorRequestCall","Index","index","_index","cursor","_cursor","_request","ObjectStore","store","_store","Transaction","idbTransaction","_tx","complete","oncomplete","onabort","UpgradeDB","db","oldVersion","transaction","_db","DB","IDBIndex","IDBCursor","methodName","createIndex","IDBObjectStore","objectStore","IDBTransaction","createObjectStore","IDBDatabase","funcName","replace","arr","Array","slice","call","callback","length","nativeObject","getAll","query","count","instance","items","iterateCursor","push","undefined","continue","exp","open","name","version","upgradeCallback","indexedDB","onupgradeneeded","event","delete","module","exports","default","webpackEmptyContext","req","e","Error","code","keys","id","dbPromise","idb","objectStoreNames","contains","keyPath","getPostsFromIDB","st","sortPosts","a","b","dateA","data","dateB","comparison","PostsContainer","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","getPosts","posts","window","reverse","setState","loaded","require","JSONClient","res","values","body","sort","catch","err","console","log","state","children","PureComponent","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","auth","GoogleAuthProvider","colors","LikeCounter","handleLike","post_id","likes","user","currentUser","userId","uid","count_upd","users_upd","users","like_index","indexOf","splice","database","ref","update","history","_this$props","classes","liked","react_default","createElement","Fragment","IconButton_default","aria-label","onClick","Favorite_default","className","Component","likeCounterWithRouter","withRouter","withStyles","theme","fontSize","color","formatData","now","Date","formatted","dd","getDate","mm","getMonth","diff","getTime","diff_min","Math","abs","round","pl","num","diff_hour","PostCard","getUserColor","userColor","content","usersRef","on","snapshot","expanded","time","_this$state","img","geo","shortText","Card_default","card","CardHeader_default","avatar","Avatar_default","style","backgroundColor","toUpperCase","title","subheader","lib_default","height","src","alt","media","CardContent_default","info","width","localization","Place_default","iconGeo","Typography_default","component","components_LikeCounter","React","maxWidth","borderRadius","boxShadow","margin","objectFit","breakpoints","up","paddingLeft","paddingRight","actions","display","expand","transform","transition","transitions","create","duration","shortest","marginLeft","marginRight","expandOpen","alignItems","justifyContent","styles","root","position","bottom","left","borderTop","zIndex","icon","button","flex","textButton","textTransform","fontWeight","fontFamily","lineHeight","BottomAppNavigation","renderCameraView","handleSwitch","step","camera","BottomNavigation_default","BottomNavigationAction_default","classNames","renderNormalView","label","NavLink","to","activeClassName","exact","Home_default","Add_default","Person_default","_this$props2","location","loggedOut","pathname","bottomNavigationWithRouter","Navigation","goBack","imgSent","singlePost","openActions","onlyBack","AppBar_default","appbar","Toolbar_default","toolbar","Link","logo","logoimage","ArrowBackIos_default","link","index_es","Settings_default","MoreVert_default","navigationWithRouter","flexGrow","borderBottom","grow","menuButton","lefticon","spacing","unit","layout","cardGrid","padding","concat","cardItemGrid","cardItem","center","top","components_Navigation","PostsContainer_PostsContainer","Grid_default","container","map","post","item","key","xs","sm","md","lg","components_PostCard","variant","progress","size","thickness","components_BottomAppNavigation","UserPostsContainer","token","user_id","postKey","itemsSorted","postsSorted","likesSorted","_this2","authFirebaseListener","onAuthStateChanged","getIdToken","Profile","switchView","view","renderList","listType","gridList","cols","innerWidth","gridListTile","gridListLink","gridImg","count_likes","count_num","count_likes_num","postCounter","classnames","postCounterButton","buttonActive","heading","counter","profile","displayName","email","UserPostsContainer_UserPostsContainer","renderPostsCounter","marginBottom","marginTop","overflow","border","textAlign","borderRight","boxSizing","background","right","paddingTop","dataURItoBlob","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","ia","Uint8Array","i","charCodeAt","Blob","type","captureButton","cx","CapturePhoto","detectMobile","navigator","userAgent","match","turnOnCamera","mediaDevices","getUserMedia","video","stream","videoStream","srcObject","globalStream","cameraHeight","getVideoTracks","getSettings","cameraWidth","turnOffCamera","getTracks","stop","elementHeight","elementWidth","timeout","setTimeout","divRef","offsetHeight","clearTimeout","_this3","captureImage","videoClass","hidden","canvasClass","canva","buttonClass","element","autoPlay","canvas","Camera_default","AddInfo","handleChange","textField","onChange","AddFile","showImage","file","URL","createObjectURL","target","files","handleAddFile","preview","accept","input","htmlFor","Button_default","AddPost","handleSend","subscriptions","imageId","uuid","imgRef","storage","child","today","put","getDownloadURL","url","itemsRef","imageid","fetch","headers","Content-Type","Accept","JSON","stringify","from","sendNotifications","webpush","setVapidDetails","sub","pushConfig","endpoint","p256dh","sendNotification","constent","getSubscriptions","subscription","context","getContext","drawImage","track","toDataURL","renderStep","_this$state2","components_CapturePhoto","components_AddInfo","components_AddFile","longText","lat","long","async","crossDomain","json","address","city","town","geolocation","getCurrentPosition","getCity","coords","latitude","longitude","nextProps","_this$state3","noValidate","autoComplete","form","objectSpread","mixins","gutters","paddingBottom","ScrollToTop","prevProps","scrollTo","Login","catchError","alert","message","login","password","setPersistence","Auth","Persistence","SESSION","signInWithEmailAndPassword","register","createUserWithEmailAndPassword","updateProfile","username","floor","random","toggleType","_ref","handleSubmit","switchViewCurrent","switchViewButtonText","switchViewButtonDesc","main","CssBaseline_default","Paper_default","paper","LockOutlined_default","FormControl_default","required","fullWidth","InputLabel_default","Input_default","autoFocus","submit","typeLink","flexDirection","PostContainer","getPost","PostActions","handleDelete","go","remove","onClose","selectedValue","other","objectWithoutProperties","Dialog_default","assign","aria-labelledby","List_default","actionList","ListItem_default","ListItemText_default","primary","action","minWidth","Post","handleClickOpen","handleClose","PostContainer_PostContainer","components_PostActions","urlBase64ToUint8Array","base64String","base64","repeat","rawData","toConsumableArray","char","PushToggle","handleToggle","currentPush","askForNotificationPermission","disableNotifications","configurePushSubscription","reg","serviceWorker","ready","swreg","pushManager","getSubscription","convertedVapidPublicKey","subscribe","userVisibleOnly","applicationServerKey","newSub","handleUpdateFirebase","displayConfirmNotification","Notification","requestPermission","options","vibrate","badge","tag","renotify","showNotification","getUserSubscription","userRef","nextState","pushToggle","secondaryHeading","checked","borderLeft","float","Settings","toggleExpand","panel","handleLogout","signOut","reload","handleEdit","newEmail","updateEmail","newLogin","newPassword","settings","new","placeholder","description","setting","ExpansionPanel_default","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","ExpansionPanelDetails_default","components_PushToggle","panelButton","red","overflowX","minHeight","flexBasis","flexShrink","iconSmall","PrivateRoute","isLogged","rest","Route","render","Redirect_default","Loading","App","getAppContent","loading","components_Loading","components_ScrollToTop","path","Home","layouts_Post","params","HashRouter","basename","process","ReactDOM","src_App_0","document","getElementById","addEventListener","origin"],"mappings":"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","file":"static/js/main.6c99eb21.chunk.js","sourcesContent":["(function () {\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function (resolve, reject) {\n      request.onsuccess = function () {\n        resolve(request.result);\n      };\n\n      request.onerror = function () {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function (resolve, reject) {\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function (value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function (prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function () {\n          return this[targetProp][prop];\n        },\n        set: function (val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function (prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function () {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function (prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function () {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function (prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function () {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', [\n    'name',\n    'keyPath',\n    'multiEntry',\n    'unique'\n  ]);\n\n  proxyRequestMethods(Index, '_index', IDBIndex, [\n    'get',\n    'getKey',\n    'getAll',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', [\n    'direction',\n    'key',\n    'primaryKey',\n    'value'\n  ]);\n\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, [\n    'update',\n    'delete'\n  ]);\n\n  // proxy 'next' methods\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function (methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n    Cursor.prototype[methodName] = function () {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function () {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n        return promisifyRequest(cursor._request).then(function (value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function () {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function () {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', [\n    'name',\n    'keyPath',\n    'indexNames',\n    'autoIncrement'\n  ]);\n\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'put',\n    'add',\n    'delete',\n    'clear',\n    'get',\n    'getAll',\n    'getKey',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, [\n    'deleteIndex'\n  ]);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function (resolve, reject) {\n      idbTransaction.oncomplete = function () {\n        resolve();\n      };\n      idbTransaction.onerror = function () {\n        reject(idbTransaction.error);\n      };\n      idbTransaction.onabort = function () {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function () {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', [\n    'objectStoreNames',\n    'mode'\n  ]);\n\n  proxyMethods(Transaction, '_tx', IDBTransaction, [\n    'abort'\n  ]);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function () {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, [\n    'deleteObjectStore',\n    'close'\n  ]);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function () {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(DB, '_db', IDBDatabase, [\n    'close'\n  ]);\n\n  // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n  ['openCursor', 'openKeyCursor'].forEach(function (funcName) {\n    [ObjectStore, Index].forEach(function (Constructor) {\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function () {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n        request.onsuccess = function () {\n          callback(request.result);\n        };\n      };\n    });\n  });\n\n  // polyfill getAll\n  [Index, ObjectStore].forEach(function (Constructor) {\n    if (Constructor.prototype.getAll) return;\n    Constructor.prototype.getAll = function (query, count) {\n      var instance = this;\n      var items = [];\n\n      return new Promise(function (resolve) {\n        instance.iterateCursor(query, function (cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length === count) {\n            resolve(items);\n            return;\n          }\n          cursor.continue();\n        });\n      });\n    };\n  });\n\n  var exp = {\n    open: function (name, version, upgradeCallback) {\n      var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n      var request = p.request;\n\n      request.onupgradeneeded = function (event) {\n        if (upgradeCallback) {\n          upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n        }\n      };\n\n      return p.then(function (db) {\n        return new DB(db);\n      });\n    },\n    delete: function (name) {\n      return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n    }\n  };\n\n  if (typeof module !== 'undefined') {\n    module.exports = exp;\n    module.exports.default = module.exports;\n  }\n  else {\n    window.self.idb = exp;\n  }\n}());\n","module.exports = \"data:image/png;base64,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\"","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 400;","import idb from './idb.js'\n\nlet dbPromise = idb.open('post-store', 1, (db) => {\n  if (!db.objectStoreNames.contains('posts')) {\n    db.createObjectStore('posts', { keyPath: 'data' })\n  }\n});\n\nexport const getPostsFromIDB = (st) => {\n  return dbPromise.then((db) => {\n    let tx = db.transaction(st, 'readonly');\n    let store = tx.objectStore(st);\n    return store.getAll()\n  })\n}\n\nexport const getPostFromIDB = (st, id) => {\n  return dbPromise.then((db) => {\n    let tx = db.transaction(st, 'readonly');\n    let store = tx.objectStore(st);\n    return store.get(id);\n  })\n}\n\nexport const deletePostsFromIDB = (st) => {\n  return dbPromise.then((db) => {\n    let tx = db.transaction(st, 'readwrite');\n    let store = tx.objectStore(st);\n    store.clear();\n    return tx.complete;\n  })\n}\n\nexport const deletePostFromIDB = (st, id) => {\n  return dbPromise.then((db) => {\n    let tx = db.transaction(st, 'readwrite');\n    let store = tx.objectStore(st);\n    store.delete(id);\n    return tx.complete;\n  })\n}","export const sortPosts = (a, b) => {\n  const dateA = a.data;\n  const dateB = b.data;\n  let comparison = 0;\n  if (dateA > dateB) {\n    comparison = -1;\n  } else if (dateA < dateB) {\n    comparison = 1;\n  }\n  return comparison;\n}","import { PureComponent } from 'react';\nimport { getPostsFromIDB } from '../helpers/indexedDB';\nimport { sortPosts } from '../helpers/sort';\n\nexport default class PostsContainer extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loaded: false,\n      posts: null\n    }\n  }\n\n  componentDidMount() {\n    this.getPosts();\n  }\n\n  getPosts = () => {\n    let posts = [];\n\n    if ('indexedDB' in window) {\n      getPostsFromIDB('posts').then((data) => {\n        posts.push(data)\n        posts = data.length > 0 ? posts[0].reverse() : posts;\n        this.setState({ posts, loaded: true });\n      })\n    }\n\n    const FirebaseREST = require('firebase-rest').default;\n    let jsonClient = new FirebaseREST.JSONClient('https://spot-pwa.firebaseio.com');\n    jsonClient.get('/posts').then(res => {\n      posts = [];\n      posts = Object.values(res.body).sort(sortPosts);\n\n      this.setState({ posts, loaded: true });\n\n    }).catch(err => console.log(err))\n  }\n\n  render() {\n    return this.props.children(this.state.posts, this.state.loaded)\n  }\n\n}\n","import firebase from 'firebase';\n// import firebase from 'firebase/app';\n// import 'firebase/auth';\n// import 'firebase/database';\n\nexport const firebaseConfig = {\n    apiKey: \"AIzaSyBot5tOfkhdUCvJsWh6sk--42syvvJwM4M\",\n    authDomain: \"spot-pwa.firebaseapp.com\",\n    databaseURL: \"https://spot-pwa.firebaseio.com\",\n    projectId: \"spot-pwa\",\n    storageBucket: \"spot-pwa.appspot.com\",\n    messagingSenderId: \"968470527016\"\n};\n\nfirebase.initializeApp(firebaseConfig);\n\nexport const provider = new firebase.auth.GoogleAuthProvider();\nexport const auth = firebase.auth();\n\nexport default firebase;","export const colors = {\n  background: \"#FAFAFA\",\n  border: \"#EEEEEE\",\n  primary: \"#212985\",\n  primaryLight: \"#9D82C0\",\n  red: \"#EE2700\",\n  textGray: \"#979797\",\n  black: \"#000000\",\n  white: \"#FFFFFF\"\n}","import React, { Component } from 'react'\nimport PropTypes from 'prop-types';\nimport firebase from '../helpers/firebase';\nimport { withStyles } from '@material-ui/core/styles';\nimport IconButton from '@material-ui/core/IconButton';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport { auth } from '../helpers/firebase';\nimport {\n  withRouter\n} from 'react-router-dom'\nimport { colors } from '../helpers/colors';\n\n\nconst styles = theme => ({\n  likes: {\n    fontSize: 12,\n    color: colors.textGray\n  },\n  liked: {\n    color: colors.red\n  }\n});\n\nclass LikeCounter extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      likes: {\n        count: 0,\n        users: []\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      likes: this.props.likes\n    })\n  }\n\n  handleLike = (post_id, likes) => () => {\n    const user = auth.currentUser;\n    if (user) {\n      const userId = user.uid;\n      let count_upd = likes.count;\n      let users_upd = likes.users ? likes.users : [];\n      const like_index = users_upd.indexOf(userId);\n      if (like_index < 0) {\n        count_upd++;\n        users_upd.push(userId);\n      } else {\n        count_upd--;\n        users_upd.splice(like_index, 1)\n      }\n      firebase.database().ref('posts/' + post_id).update({\n        likes: {\n          count: count_upd,\n          users: users_upd\n        }\n      });\n      this.setState({\n        likes: {\n          count: count_upd,\n          users: users_upd\n        }\n      })\n    } else {\n      this.props.history.push('/login')\n    }\n  }\n\n  render() {\n    const { likes } = this.state;\n    const { id, classes } = this.props;\n    const user = auth.currentUser;\n    const liked = user && likes.users ? likes.users.indexOf(user.uid) >= 0 : false;\n    return (\n      <>\n        <IconButton aria-label=\"Polajkuj\" onClick={this.handleLike(id, likes)}>\n          <FavoriteIcon className={liked ? classes.liked : ''} />\n        </IconButton>\n        <span className={classes.likes}>{likes && likes.count}</span>\n      </>\n    )\n  }\n}\n\nLikeCounter.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\n\nconst likeCounterWithRouter = withRouter(LikeCounter);\n\nexport default withStyles(styles)(likeCounterWithRouter);","export const formatData = (data) => {\n  let now = new Date();\n  let formatted = new Date(data);\n  let dd = formatted.getDate();\n  let mm = formatted.getMonth() + 1;\n  if (dd < 10) {\n    dd = '0' + dd\n  };\n  let diff = (now.getTime() - formatted.getTime()) / 1000;\n  const diff_min = Math.abs(Math.round(diff / 60));\n  const pl = (num) => {\n    if (num === 1) {\n      return 'ę';\n    } else if (num > 1 && num < 5) {\n      return 'y';\n    }\n    return '';\n  }\n  let result = diff_min + ' minut' + pl(diff_min) + ' temu';\n  if (diff_min >= 60 && diff_min < (60 * 24)) {\n    const diff_hour = Math.abs(Math.round(diff / (60 * 60)));\n    result = diff_hour + ' godzin' + pl(diff_hour) + ' temu'\n  } else if (diff_min >= (60 * 24)) {\n    const month = ['stycznia', 'lutego', 'marca', 'kwietnia', 'maja', 'czerwca', 'lipca', 'sierpnia', 'września', 'października', 'listopada', 'grudnia']\n    result = dd + ' ' + month[mm - 1]\n  }\n  return result\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport PlaceIcon from '@material-ui/icons/Place';\nimport LikeCounter from './LikeCounter';\nimport { formatData } from '../helpers/formatData';\nimport firebase from '../helpers/firebase';\nimport LazyLoad from 'react-lazyload';\nimport { colors } from '../helpers/colors';\n\nconst styles = theme => ({\n  card: {\n    maxWidth: 500,\n    borderRadius: 0,\n    boxShadow: 'none',\n    margin: '0 auto'\n  },\n  media: {\n    width: '100%',\n    height: 380,\n    objectFit: 'cover',\n    [theme.breakpoints.up('sm')]: {\n      paddingLeft: 12,\n      paddingRight: 12\n    },\n  },\n  actions: {\n    display: 'flex'\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n    marginLeft: 'auto',\n    [theme.breakpoints.up('sm')]: {\n      marginRight: -8,\n    },\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  localization: {\n    color: colors.textGray,\n    fontSize: 12,\n    display: 'flex',\n    alignItems: 'center'\n  },\n  iconGeo: {\n    width: 14,\n    height: 14\n  },\n  info: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n});\n\nclass PostCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      expanded: false,\n      time: null,\n      color: null\n    }\n  }\n\n  componentDidMount() {\n    const { content } = this.props;\n    const user = content.user;\n    const color = this.getUserColor(user.id)\n    this.setState({\n      time: formatData(content.data),\n      color\n    })\n  }\n\n  getUserColor = (id) => {\n    const userColor = this.props.content.user.color;\n    if (userColor) {\n      return userColor;\n    } else {\n      this.usersRef = firebase.database().ref('users/' + id);\n      this.usersRef.on('value', (snapshot) => {\n        return snapshot.val().color;\n      });\n    }\n  }\n\n  render() {\n    const { classes, content } = this.props;\n    const { time, color } = this.state;\n    const { id, user, img, geo, shortText, likes } = content;\n    return (\n      <Card className={classes.card}>\n        <CardHeader\n          avatar={\n            <Avatar className={classes.avatar} style={{ backgroundColor: color }}>{user && user.name[0].toUpperCase()}</Avatar>\n          }\n          title={user.name}\n          subheader={time}\n        />\n        <LazyLoad height={380}>\n          <img src={img} alt={shortText} className={classes.media} />\n        </LazyLoad>\n        <CardContent className={classes.info}>\n          <div style={{ width: '80%' }}>\n            <p className={classes.localization}>\n              <PlaceIcon className={classes.iconGeo} />\n              {geo}\n            </p>\n            <Typography component=\"p\">\n              {shortText}\n            </Typography>\n          </div>\n          <div style={{ width: '20%' }}>\n            <LikeCounter likes={likes} id={id} />\n          </div>\n        </CardContent>\n      </Card >\n    );\n  }\n}\n\nPostCard.propTypes = {\n  classes: PropTypes.object.isRequired,\n  content: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(PostCard);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { NavLink } from 'react-router-dom';\nimport { withRouter } from \"react-router\";\nimport { withStyles } from '@material-ui/core/styles';\nimport BottomNavigation from '@material-ui/core/BottomNavigation';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport HomeIcon from '@material-ui/icons/Home';\nimport PersonIcon from '@material-ui/icons/Person';\nimport AddIcon from '@material-ui/icons/Add';\nimport classNames from 'classnames';\nimport { colors } from '../helpers/colors';\n\nconst styles = {\n  root: {\n    width: '100%',\n    position: 'fixed',\n    bottom: 0,\n    left: 0,\n    boxShadow: 'none',\n    borderTop: '1px solid ' + colors.border,\n    backgroundColor: colors.background,\n    zIndex: 1\n  },\n  icon: {\n    color: colors.primaryLight\n  },\n  button: {\n    color: 'inherit'\n  },\n  flex: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  textButton: {\n    color: colors.primaryLight,\n    textTransform: 'uppercase',\n    fontWeight: 500,\n    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n    fontSize: '0.875rem',\n    lineHeight: '0.875rem'\n  }\n};\n\nclass BottomAppNavigation extends React.Component {\n\n  renderCameraView = () => {\n    const { classes, handleSwitch, step, camera } = this.props;\n    return (\n      <BottomNavigation\n        className={classes.root}\n      >\n        {camera &&\n          <BottomNavigationAction\n            className={classNames(classes.button, classes.textButton + ' ' + (step === 1 && 'activeTextButton'))}\n            onClick={handleSwitch(1)}\n            icon=\"Zdjęcie\"\n          />\n        }\n        <BottomNavigationAction\n          className={classNames(classes.button, classes.textButton + ' ' + (step === 2 && 'activeTextButton'))}\n          icon=\"Galeria\"\n          onClick={handleSwitch(2)}\n        />\n      </BottomNavigation>\n    )\n  }\n\n  renderNormalView = () => {\n    const { classes } = this.props;\n    return (\n      <BottomNavigation\n        className={classes.root}\n      >\n        <BottomNavigationAction\n          className={classes.button}\n          label=\"Home\"\n          icon={\n            <NavLink\n              to=\"/\"\n              activeClassName='iconactive'\n              exact={true}\n              className={classes.icon}\n            >\n              <HomeIcon />\n            </NavLink>}\n        />\n        <BottomNavigationAction\n          label=\"Add\"\n          className={classes.button}\n          icon={\n            <NavLink\n              to=\"/add\"\n              activeClassName='iconactive'\n              exact={true}\n              className={classes.icon}\n            >\n              <AddIcon />\n            </NavLink>}\n        />\n        <BottomNavigationAction\n          label=\"Profile\"\n          className={classes.button}\n          icon={\n            <NavLink\n              to={\"/profile\"}\n              activeClassName='iconactive'\n              exact={true}\n              className={classes.icon}\n            >\n              <PersonIcon />\n            </NavLink>}\n        />\n      </BottomNavigation>\n    )\n  }\n\n  render() {\n    const { location, loggedOut } = this.props;\n\n    return (\n      location.pathname === '/add' && !loggedOut\n        ? this.renderCameraView()\n        : this.renderNormalView()\n    );\n  }\n}\n\nBottomAppNavigation.propTypes = {\n  classes: PropTypes.object.isRequired,\n  location: PropTypes.object.isRequired,\n  handleSwitch: PropTypes.func,\n  step: PropTypes.number,\n  camera: PropTypes.bool\n};\n\nconst bottomNavigationWithRouter = withRouter(BottomAppNavigation);\n\nexport default withStyles(styles)(bottomNavigationWithRouter);\n\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { withRouter } from \"react-router\";\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport { Button } from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\n// import SearchIcon from '@material-ui/icons/Search';\nimport logo from 'assets/images/logo-nb.png';\nimport { colors } from '../helpers/colors';\n// import Input from '@material-ui/core/Input';\n// import InputAdornment from '@material-ui/core/InputAdornment';\n// import FormControl from '@material-ui/core/FormControl';\n\nconst styles = theme => ({\n\troot: {\n\t\tflexGrow: 1,\n\t},\n\tappbar: {\n\t\tbackgroundColor: colors.background,\n\t\tboxShadow: 'none',\n\t\tborderBottom: '1px solid ' + colors.border,\n\t},\n\tgrow: {\n\t\tflexGrow: 1,\n\t},\n\tmenuButton: {\n\t\tmarginLeft: -12,\n\t\tmarginRight: 20,\n\t},\n\tlogo: {\n\t\tdisplay: 'flex',\n\t\talignItems: 'center'\n\t},\n\tlogoimage: {\n\t\theight: 40\n\t},\n\tlink: {\n\t\tcolor: colors.primary\n\t},\n\tlefticon: {\n\t\tmarginRight: 30\n\t},\n\ttoolbar: {\n\t\tjustifyContent: 'space-between',\n\t\t[theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n\t\t\twidth: 1100,\n\t\t\tmarginLeft: 'auto',\n\t\t\tmarginRight: 'auto',\n\t\t}\n\t}\n\t// search: {\n\t// \twidth: 25,\n\t// \ttransition: 'width 100ms ease-in-out'\n\t// },\n\t// searchActive: {\n\t// \twidth: 200,\n\t// \ttransition: 'width 100ms ease-in-out'\n\t// }\n});\n\nclass Navigation extends React.Component {\n\t// constructor(props) {\n\t// \tsuper(props);\n\n\t// this.state = {\n\t// \tsearchActive: false\n\t// }\n\t// }\n\n\tgoBack = () => {\n\t\tthis.props.history.goBack();\n\t}\n\n\t// openSearch = () => {\n\t// \tthis.setState({\n\t// \t\tsearchActive: true\n\t// \t})\n\t// }\n\n\trender() {\n\t\tconst { classes, location, handleSwitch, imgSent, step, singlePost, openActions, onlyBack, loggedOut } = this.props;\n\t\t// const { searchActive } = this.state;\n\t\treturn (\n\t\t\t<div className={classes.root}>\n\t\t\t\t<AppBar position=\"fixed\" className={classes.appbar}>\n\t\t\t\t\t<Toolbar className={classes.toolbar}>\n\t\t\t\t\t\t{!singlePost && !onlyBack &&\n\t\t\t\t\t\t\t<Link to=\"/\" className={classes.logo}>\n\t\t\t\t\t\t\t\t<img src={logo} alt=\"\" className={classes.logoimage} />\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{(singlePost || onlyBack) && !loggedOut &&\n\t\t\t\t\t\t\t<ArrowBackIosIcon className={classes.link} onClick={this.goBack} />\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{location.pathname === '/add' && imgSent && step === 3 && !loggedOut &&\n\t\t\t\t\t\t\t<Button className={classes.link} onClick={handleSwitch(1)}>\n\t\t\t\t\t\t\t\tWróć\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{location.pathname === '/profile' && !loggedOut &&\n\t\t\t\t\t\t\t<Link to=\"/settings\" >\n\t\t\t\t\t\t\t\t<SettingsIcon className={classes.link} />\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{singlePost && openActions && !loggedOut &&\n\t\t\t\t\t\t\t<MoreVertIcon className={classes.link} onClick={openActions} />\n\t\t\t\t\t\t}\n\t\t\t\t\t\t{/* {location.pathname === '/' &&\n\t\t\t\t\t\t\t<FormControl className={classes.margin}>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\tid=\"input-with-icon-adornment\"\n\t\t\t\t\t\t\t\t\tclassName={searchActive ? classes.searchActive : classes.search}\n\t\t\t\t\t\t\t\t\tstartAdornment={\n\t\t\t\t\t\t\t\t\t\t<InputAdornment position=\"start\">\n\t\t\t\t\t\t\t\t\t\t\t<SearchIcon className={classes.link} onClick={this.openSearch} />\n\t\t\t\t\t\t\t\t\t\t</InputAdornment>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t} */}\n\t\t\t\t\t</Toolbar>\n\t\t\t\t</AppBar>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nNavigation.propTypes = {\n\tclasses: PropTypes.object,\n\tlocation: PropTypes.object,\n\thandleSwitch: PropTypes.func,\n\timgSent: PropTypes.bool,\n\tstep: PropTypes.number,\n\tsinglePost: PropTypes.bool,\n\topenActions: PropTypes.func,\n\tonlyBack: PropTypes.bool\n};\n\nconst navigationWithRouter = withRouter(Navigation);\n\nexport default withStyles(styles)(navigationWithRouter);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Grid from '@material-ui/core/Grid';\nimport { withStyles } from '@material-ui/core/styles';\nimport PostsContainer from 'containers/PostsContainer';\nimport PostCard from 'components/PostCard';\nimport BottomAppNavigation from 'components/BottomAppNavigation';\nimport Navigation from 'components/Navigation';\nimport { Typography, CircularProgress } from '@material-ui/core';\n\nconst styles = theme => ({\n  layout: {\n    width: 'auto',\n    marginLeft: theme.spacing.unit * 3,\n    marginRight: theme.spacing.unit * 3,\n    [theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n      width: 1100,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    }\n  },\n  cardGrid: {\n    padding: `${theme.spacing.unit * 4}px 0 !important`\n  },\n  cardItemGrid: {\n    padding: '0 !important'\n  },\n  cardItem: {\n    width: 'calc(100% + 48px)',\n    margin: -24\n  },\n  center: {\n    width: '100%',\n    height: '100vh',\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});\n\n\nfunction Home(props) {\n  const { classes, auth } = props;\n\n  return (\n    <div className={classNames(classes.layout, classes.cardGrid)}>\n      <Navigation />\n      <PostsContainer auth={auth}>\n        {(posts, loaded) => {\n          if (!loaded) {\n            return (\n              <div className={classes.center}>\n                <CircularProgress className={classes.progress} size={30} thickness={5} />\n              </div>\n            )\n          }\n          return (\n            <Grid container spacing={40} className={classes.cardItem}>\n              {posts.length > 0\n                ? posts.map((post, index) => (\n                  <Grid item key={index} xs={12} sm={4} md={4} lg={4} className={classes.cardItemGrid}>\n                    <PostCard content={post} />\n                  </Grid>\n                ))\n                : (\n                  <Typography variant=\"subheading\" className={classes.center}>\n                    Brak postów do wyświetlenia\n                  </Typography>\n                )}\n            </Grid>\n          )\n        }}\n      </PostsContainer>\n      <BottomAppNavigation />\n    </div>\n  );\n}\n\nHome.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\n\nexport default withStyles(styles)(Home);","import { PureComponent } from 'react';\nimport { auth } from '../helpers/firebase';\nimport { getPostsFromIDB } from '../helpers/indexedDB';\nimport { sortPosts } from '../helpers/sort';\n\nexport default class UserPostsContainer extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loaded: false,\n      likes: [],\n      posts: []\n    }\n  }\n\n  componentDidMount() {\n    this.authFirebaseListener = auth.onAuthStateChanged((user) => {\n      if (user) {\n        user.getIdToken().then((token) => {\n          this.getPosts(token);\n        });\n      }\n    });\n  }\n\n  getPosts = (token) => {\n    const user_id = this.props.user.uid;\n    let posts = [];\n    let likes = [];\n\n    if ('indexedDB' in window) {\n      getPostsFromIDB('posts').then((data) => {\n        for (let post in data) {\n          if (data[post].user.id === user_id) {\n            posts.push(data[post]);\n          }\n          if (data[post].likes.users) {\n            if (data[post].likes.users.indexOf(user_id) >= 0) {\n              likes.push(data[post]);\n            }\n          }\n        }\n\n        posts = posts.reverse();\n        likes = likes.reverse();\n        this.setState({ posts, likes, loaded: true });\n      })\n    }\n\n    const FirebaseREST = require('firebase-rest').default;\n    let jsonClient = new FirebaseREST.JSONClient('https://spot-pwa.firebaseio.com', { auth: token });\n\n    jsonClient.get('/posts').then(res => {\n      posts = [];\n      likes = [];\n      for (let postKey in res.body) {\n        if (res.body[postKey].user.id === user_id) {\n          posts.push(res.body[postKey]);\n        }\n        if (res.body[postKey].likes.users) {\n          if (res.body[postKey].likes.users.indexOf(user_id) >= 0) {\n            likes.push(res.body[postKey]);\n          }\n        }\n      }\n      let itemsSorted = [];\n      let postsSorted = posts.sort(sortPosts)\n      let likesSorted = likes.sort(sortPosts)\n      itemsSorted.push(postsSorted)\n      itemsSorted.push(likesSorted)\n      return itemsSorted;\n    }).then(itemsSorted => {\n      const posts = itemsSorted[0];\n      const likes = itemsSorted[1];\n      this.setState({ posts, likes, loaded: true });\n    }).catch(err => console.log(err))\n  }\n\n  render() {\n    return this.props.children(this.state.posts, this.state.likes, this.state.loaded)\n  }\n\n}\n","import React, { PureComponent } from 'react'\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Avatar from '@material-ui/core/Avatar';\nimport { Typography, CircularProgress, GridListTile, GridList } from '@material-ui/core';\nimport BottomAppNavigation from 'components/BottomAppNavigation';\nimport Navigation from 'components/Navigation';\nimport UserPostsContainer from '../containers/UserPostsContainer';\nimport classnames from 'classnames';\nimport firebase from '../helpers/firebase';\nimport { Link } from 'react-router-dom';\nimport { colors } from '../helpers/colors';\n\nconst styles = theme => ({\n  profile: {\n    borderRadius: 0,\n    boxShadow: 'none',\n    [theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n      width: 1100,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n      marginBottom: 15\n    }\n  },\n  layout: {\n    [theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n      width: 1100,\n      marginLeft: 'auto',\n      marginRight: 'auto'\n    }\n  },\n  heading: {\n    lineHeight: '1em',\n    color: colors.textGray,\n    marginBottom: 5,\n    marginTop: 15\n  },\n  counter: {\n    lineHeight: '1em',\n    marginBottom: 15\n  },\n  gridList: {\n    margin: '0 !important',\n    overflow: 'visible'\n  },\n  postCounter: {\n    border: '1px solid ' + colors.border,\n    textAlign: 'center'\n  },\n  postCounterButton: {\n    width: '50%',\n    borderRight: '1px solid ' + colors.border,\n    display: 'inline-block',\n    boxSizing: 'border-box'\n  },\n  buttonActive: {\n    background: colors.background\n  },\n  center: {\n    width: '100% !important',\n    height: '100vh !important',\n    zIndex: -1,\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  gridImg: {\n    objectFit: 'cover',\n    width: '100%',\n    height: '100%',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0\n  },\n  gridListTile: {\n    height: 'initial !important',\n    position: 'relative',\n    width: '100%',\n    overflow: 'hidden',\n    background: colors.primary\n  },\n  gridListLink: {\n    display: 'block',\n    paddingTop: '100%'\n  }\n});\n\nclass Profile extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      view: 'posts',\n      color: null\n    }\n  }\n\n  componentDidMount() {\n    const { user } = this.props;\n    this.getUserColor(user.uid)\n  }\n\n  switchView = (view) => () => {\n    this.setState({ view })\n  }\n\n  renderPostsCounter(count, count_likes) {\n    const { classes } = this.props;\n    const { view } = this.state;\n    const count_num = count.length === 0 ? 0 : count;\n    const count_likes_num = count_likes.length === 0 ? 0 : count_likes;\n    return (\n      <div className={classes.postCounter}>\n        <div className={classnames(classes.postCounterButton, view === 'posts' ? classes.buttonActive : '')} onClick={this.switchView('posts')}>\n          <Typography variant=\"overline\" className={classes.heading}>Moje posty</Typography>\n          <Typography variant=\"overline\" className={classes.counter}>{count_num}</Typography>\n        </div>\n        <div className={classnames(classes.postCounterButton, view === 'likes' ? classes.buttonActive : '')} onClick={this.switchView('likes')}>\n          <Typography variant=\"overline\" className={classes.heading}>Polubione</Typography>\n          <Typography variant=\"overline\" className={classes.counter}>{count_likes_num}</Typography>\n        </div>\n      </div >\n    )\n  }\n\n  getUserColor = (id) => {\n    this.usersRef = firebase.database().ref('users/' + id);\n    this.usersRef.on('value', (snapshot) => {\n      this.setState({ color: snapshot.val().color })\n    });\n  }\n\n  renderList = (listType) => {\n    const { classes } = this.props;\n    return (\n      <GridList spacing={0} className={classes.gridList}>\n        {listType.length > 0 ?\n          listType.map((post, index) => (\n            <GridListTile\n              cols={window.innerWidth > 1100 ? .6666 : 1}\n              key={index}\n              className={classes.gridListTile}>\n              <Link\n                to={'/post/' + post.id}\n                className={classes.gridListLink}>\n                <img src={post.img} alt={post.shortText} className={classes.gridImg} />\n              </Link>\n            </GridListTile>\n          )) : (\n            <div className={classes.center}>\n              <Typography variant=\"subheading\">\n                Brak postów do wyświetlenia\n           </Typography>\n            </div>\n          )\n        }\n      </GridList >\n    )\n  }\n\n  render() {\n    const { view, color } = this.state;\n    const { classes, user } = this.props;\n\n    return (\n      <>\n        <Navigation />\n        <Card className={classes.profile}>\n          <CardHeader\n            avatar={\n              <Avatar className={classes.avatar} style={{ backgroundColor: color }}>{user.displayName ? user.displayName[0].toUpperCase() : ''}</Avatar>\n            }\n            title={user ? user.displayName : ''}\n            subheader={user ? user.email : ''}\n          />\n        </Card>\n        <div className={classes.layout}>\n          <UserPostsContainer user={user}>\n            {(posts, likes, loaded) => {\n              if (!loaded) {\n                return (\n                  <>\n                    {this.renderPostsCounter(0, 0)}\n                    <div className={classes.center}>\n                      <CircularProgress className={classes.progress} size={30} thickness={5} />\n                    </div>\n                  </>\n                )\n              }\n              return (\n                <>\n                  {this.renderPostsCounter(posts.length, likes.length)}\n                  {view === 'posts' ? this.renderList(posts) : this.renderList(likes)}\n                </>\n              )\n            }\n            }\n          </UserPostsContainer>\n        </div>\n        <BottomAppNavigation />\n      </>\n    )\n  }\n}\n\nProfile.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Profile);","export const dataURItoBlob = (dataURI) => {\n    const byteString = atob(dataURI.split(\",\")[1]);\n    const mimeString = dataURI\n        .split(\",\")[0]\n        .split(\":\")[1]\n        .split(\";\")[0];\n    const ab = new ArrayBuffer(byteString.length);\n    const ia = new Uint8Array(ab);\n    for (let i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    const blob = new Blob([ab], { type: mimeString });\n    return blob;\n}","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport * as classNames from 'classnames';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Button } from '@material-ui/core';\nimport CameraIcon from '@material-ui/icons/Camera';\n\nconst styles = theme => ({\n  captureButton: {\n    fontSize: '46px'\n  },\n});\n\nconst cx = classNames.bind(styles)\n\nclass CapturePhoto extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      elementHeight: 300,\n      cameraHeight: null,\n      cameraWidth: null,\n      elementWidth: null,\n      globalStream: null\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.camera) {\n      this.turnOnCamera();\n      this.timeout = setTimeout(() => {\n        const elementHeight = this.divRef ? this.divRef.offsetHeight : 0;\n        const elementWidth = elementHeight * this.state.cameraWidth / this.state.cameraHeight;\n        this.setState({ elementHeight, elementWidth });\n      }, 1000);\n    }\n  }\n\n  componentWillUnmount() {\n    this.turnOffCamera()\n    clearTimeout(this.timeout)\n  }\n\n  detectMobile = () => {\n    if (navigator.userAgent.match(/Android/i)\n      || navigator.userAgent.match(/webOS/i)\n      || navigator.userAgent.match(/iPhone/i)\n      || navigator.userAgent.match(/iPad/i)\n      || navigator.userAgent.match(/iPod/i)\n      || navigator.userAgent.match(/BlackBerry/i)\n      || navigator.userAgent.match(/Windows Phone/i)\n    ) {\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  turnOnCamera = () => {\n    navigator.mediaDevices.getUserMedia({ video: true }).then(stream => {\n      this.videoStream.srcObject = stream;\n      this.setState({ globalStream: stream })\n      const cameraHeight = stream.getVideoTracks()[0].getSettings().height;\n      const cameraWidth = stream.getVideoTracks()[0].getSettings().width;\n      if (!this.detectMobile()) {\n        // horizontal\n        this.setState({\n          cameraHeight,\n          cameraWidth\n        })\n      } else {\n        // vertical\n        this.setState({\n          cameraHeight: cameraWidth,\n          cameraWidth: cameraHeight\n        })\n      }\n    }).catch(err => {\n      console.log(err)\n    })\n  }\n\n  turnOffCamera = () => {\n    if (this.state.globalStream) {\n      let track = this.state.globalStream.getTracks()[0]\n      track.stop()\n    }\n  }\n\n  render() {\n    const { classes, captureImage, imgSent } = this.props;\n    const { elementHeight, elementWidth } = this.state;\n    const videoClass = cx({\n      video: true,\n      hidden: imgSent\n    });\n\n    const canvasClass = cx({\n      canva: true,\n      hidden: !imgSent\n    });\n\n    const buttonClass = cx({\n      captureButton: true\n    });\n\n    return (\n      <>\n        <div className=\"video-container\" ref={element => this.divRef = element}>\n          <video\n            className={videoClass}\n            autoPlay\n            ref={(stream) => { this.videoStream = stream }}\n            height={elementHeight}\n            width={elementWidth}\n          />\n          <canvas\n            className={canvasClass}\n            ref={(canvas) => { this.canvas = canvas }}\n            height={elementHeight}\n            width={elementWidth}\n          />\n        </div>\n        <Button\n          className={buttonClass}\n          color=\"primary\"\n          type=\"button\"\n          onClick={captureImage(this.canvas, this.videoStream)}\n          ref={(captureButton) => { this.captureButton = captureButton }}\n        >\n          <CameraIcon className={classes.captureButton} />\n        </Button>\n      </>\n\n    )\n  }\n}\n\n\nCapturePhoto.propTypes = {\n  classes: PropTypes.object.isRequired,\n  captureImage: PropTypes.func,\n  imgSent: PropTypes.bool,\n  camera: PropTypes.bool\n};\n\n\nexport default withStyles(styles)(CapturePhoto);","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { TextField } from '@material-ui/core';\n\n\nconst styles = theme => ({\n  textField: {\n    width: '100%'\n  },\n  button: {\n    width: '100%',\n    marginTop: theme.spacing.unit * 2\n  }\n});\n\nclass AddInfo extends PureComponent {\n  render() {\n    const { classes, handleChange, values } = this.props;\n    return (\n      <>\n        <TextField\n          id=\"outlined-name\"\n          label=\"Podpis\"\n          className={classes.textField}\n          value={values.shortText}\n          onChange={handleChange('shortText')}\n          margin=\"normal\"\n          variant=\"outlined\"\n        />\n        <TextField\n          id=\"outlined-name\"\n          label=\"Lokalizacja\"\n          className={classes.textField}\n          value={values.geo}\n          onChange={handleChange('geo')}\n          margin=\"normal\"\n          variant=\"outlined\"\n        />\n      </>\n    )\n  }\n}\n\nAddInfo.propTypes = {\n  classes: PropTypes.object.isRequired,\n  handleChange: PropTypes.func.isRequired,\n  values: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(AddInfo);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nconst styles = theme => ({\n\tbutton: {\n\t\tmargin: theme.spacing.unit,\n\t\tmarginTop: 30\n\t},\n\tinput: {\n\t\tdisplay: 'none',\n\t},\n\tlabel: {\n\t\twidth: '100%',\n\t\tdisplay: 'block',\n\t\ttextAlign: 'center'\n\t},\n\tpreview: {\n\t\twidth: '100%'\n\t}\n});\n\n\nclass AddFile extends Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\t\tthis.state = {\n\t\t\tfile: null\n\t\t}\n\t}\n\n\tshowImage = (event) => {\n\t\tthis.setState({\n\t\t\tfile: URL.createObjectURL(event.target.files[0])\n\t\t})\n\t}\n\n\trender() {\n\t\tconst { classes, handleAddFile } = this.props;\n\t\treturn (\n\t\t\t<div id=\"pick-image\">\n\t\t\t\t{this.state.file ? <img className={classes.preview} src={this.state.file} alt=\"podgląd\" /> : ''}\n\t\t\t\t<input\n\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\tid=\"image-picker\"\n\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\tthis.showImage(event);\n\t\t\t\t\t\thandleAddFile(event)\n\t\t\t\t\t}}\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t/>\n\t\t\t\t<label htmlFor=\"image-picker\" className={classes.label}>\n\t\t\t\t\t<Button variant=\"contained\" component=\"span\" className={classes.button}>\n\t\t\t\t\t\tWybierz zdjęcie\n        </Button>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nAddFile.propTypes = {\n\thandleAddFile: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(AddFile);","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport firebase from '../helpers/firebase';\nimport uuid from 'uuid';\nimport { dataURItoBlob } from '../helpers/imageFiles';\nimport Grid from '@material-ui/core/Grid';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Button, CircularProgress } from '@material-ui/core';\nimport * as classNames from 'classnames';\nimport CapturePhoto from '../components/CapturePhoto';\nimport AddInfo from '../components/AddInfo';\nimport BottomAppNavigation from '../components/BottomAppNavigation';\nimport Navigation from '../components/Navigation';\nimport AddFile from '../components/AddFile';\nimport webpush from 'web-push';\n\nconst styles = theme => ({\n  layout: {\n    width: 'auto',\n    marginLeft: 0,\n    marginRight: 0,\n    [theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n      width: 1100,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    }\n  },\n  container: {\n    padding: 20,\n    paddingTop: 0,\n    [theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n      width: 500,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    }\n  },\n  form: {\n    ...theme.mixins.gutters(),\n    paddingTop: theme.spacing.unit * 2,\n    paddingBottom: theme.spacing.unit * 2\n  },\n  textField: {\n    width: '100%'\n  },\n  button: {\n    width: '100%',\n    marginTop: 15,\n    height: 50\n  },\n  center: {\n    width: '100%',\n    height: '100vh',\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    background: 'rgba(255,255,255,.5)',\n    zIndex: 1\n  }\n});\n\nclass AddPost extends PureComponent {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      imageId: '',\n      id: '',\n      user: null,\n      data: '',\n      img: '',\n      geo: '',\n      shortText: '',\n      longText: '',\n      step: 2,\n      imgSent: false,\n      camera: false,\n      loaded: 'beforeSend',\n      subscriptions: []\n    }\n  }\n\n  getCity(lat, long) {\n    return fetch(\"https://us1.locationiq.com/v1/reverse.php?key=2c35b6ae22579a&lat=\" + lat + \"&lon=\" + long + \"&format=json\", {\n      \"async\": true,\n      \"crossDomain\": true,\n      \"method\": \"GET\"\n    }).then(res => res.json()).then(res => {\n      return res.address.city || res.address.town;\n    })\n  }\n\n  componentDidMount() {\n    const { user } = this.props;\n\n    //check if there is navigation, if there is, autofill locatization\n    if (\"geolocation\" in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          this.getCity(position.coords.latitude, position.coords.longitude)\n            .then(city => {\n              this.setState({\n                geo: city\n              })\n            })\n        },\n        (err) => {\n          console.log(err);\n        }\n      )\n    }\n\n    //check if we have access to the camera\n    if ('mediaDevices' in navigator) {\n      if ('getUserMedia' in navigator.mediaDevices) {\n        this.setState({\n          camera: true,\n          step: 1\n        })\n      }\n    }\n\n    if (user) {\n      let color = '';\n      this.usersRef = firebase.database().ref('users/' + user.uid);\n      this.usersRef.on('value', (snapshot) => {\n        color = snapshot.val().color;\n        if (color) {\n          this.setState({\n            user: {\n              id: user.uid,\n              name: user.displayName,\n              color: color\n            }\n          })\n        }\n      });\n    }\n    this.getSubscriptions();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.user !== this.props.user) {\n      this.setState({\n        user: {\n          id: nextProps.user.uid,\n          name: nextProps.user.displayName\n        }\n      })\n    }\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  handleAddFile = event => {\n    this.setState({\n      img: event.target.files[0],\n      imgSent: true\n    });\n  };\n\n  handleSend = () => {\n    //add photo \n    const { user, img, geo, shortText, subscriptions } = this.state;\n    this.setState({ loaded: false })\n    const imageId = uuid();\n    const id = uuid();\n    const storage = firebase.storage();\n    const imgRef = storage.ref().child('images').child(imageId);\n    const today = new Date().getTime();\n\n    imgRef.put(img).then(() => {\n      imgRef.getDownloadURL()\n        .then((url) => {\n          //add content\n          const itemsRef = firebase.database().ref('posts/' + id);\n          const item = {\n            id: id,\n            imageid: imageId,\n            user: user,\n            data: today,\n            img: url,\n            geo: geo,\n            shortText: shortText,\n            likes: {\n              count: 0\n            }\n          }\n\n          itemsRef.set(item).then(() => {\n            fetch(\"https://us-central1-spot-pwa.cloudfunctions.net/sendNotifications\", {\n              method: \"POST\",\n              headers: {\n                \"Content-Type\": \"application/json\",\n                Accept: \"application/json\"\n              },\n              body: JSON.stringify({\n                from: user,\n                subscriptions: subscriptions\n              })\n            })\n          });\n\n          this.setState({\n            id: '',\n            imageId: '',\n            data: '',\n            img: '',\n            geo: '',\n            shortText: '',\n            loaded: true\n          });\n          this.props.history.goBack()\n        })\n      return true\n    }).catch((err) => {\n      this.setState({ loaded: true })\n      console.log(err)\n    });\n  }\n\n  sendNotifications = () => {\n    webpush.setVapidDetails(\n      'mailto:test@test.pl',\n      'BCpge7IV7kIBHpMQ1ahqFVC0TzobN3sqkN_C5hk3LTrU5ytxj4o2ozTA_vxU-ZHZW8HW0Ldw9JJPfLX6hg-lPkA',\n      '52hq0m6auAORzXwI46Os-a6wyxvKtH5B2-IkVfXn2JE');\n    const { subscriptions } = this.state;\n    subscriptions.forEach((sub) => {\n      const pushConfig = {\n        endpoint: sub.endpoint,\n        keys: {\n          auth: sub.keys.auth,\n          p256dh: sub.keys.p256dh\n        }\n      }\n      webpush.sendNotification(pushConfig, JSON.stringify({\n        title: 'Nowy post na Spotick!',\n        constent: 'Ktoś wrzucił nowe zdjęcie, zobacz jakie!'\n      }));\n    })\n  }\n\n  getSubscriptions = () => {\n    this.usersRef = firebase.database().ref('users');\n    const subscriptions = [];\n    this.usersRef.on('value', (snapshot) => {\n      snapshot.forEach((child) => {\n        if (child.val().subscription) {\n          subscriptions.push(child.val().subscription);\n        }\n      })\n      this.setState({ subscriptions });\n    });\n  }\n\n  handleSwitch = (step) => () => {\n    this.setState({\n      step,\n      imgSent: false\n    })\n  }\n\n  captureImage = (canvas, video) => () => {\n    const context = canvas.getContext('2d');\n    const width = canvas.width;\n    context.drawImage(video, 0, 0, width, canvas.height);\n    video.srcObject.getVideoTracks().forEach(track => {\n      track.stop()\n    })\n    const img = dataURItoBlob(canvas.toDataURL('image/jpeg', 0.5))\n    this.setState({\n      imgSent: true,\n      img\n    })\n  }\n\n  renderStep = (step) => {\n    const { classes } = this.props;\n    const { imgSent, camera, shortText, geo } = this.state;\n    const values = { shortText, geo };\n    switch (step) {\n      case 1:\n        return (\n          <>\n            <CapturePhoto captureImage={this.captureImage} imgSent={imgSent} camera={camera} />\n            <div className={classes.container}>\n              <AddInfo handleChange={this.handleChange} values={values} />\n              <Button variant=\"contained\" color=\"primary\" className={classes.button} onClick={this.handleSend}>Opublikuj</Button>\n            </div>\n          </>\n        )\n      case 2:\n        return (\n          <>\n            <AddFile handleAddFile={this.handleAddFile} />\n            <div className={classes.container}>\n              <AddInfo handleChange={this.handleChange} values={values} />\n              <Button variant=\"contained\" color=\"primary\" className={classes.button} onClick={this.handleSend}>Opublikuj</Button>\n            </div>\n          </>\n        )\n      default:\n        return <CapturePhoto captureImage={this.captureImage} imgSent={imgSent} camera={camera} />\n    }\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { step, imgSent, camera, loaded } = this.state;\n    return (\n      <>\n        <Navigation handleSwitch={this.handleSwitch} imgSent={imgSent} step={step} />\n        <div className={classNames(classes.layout, classes.cardGrid)}>\n          <Grid container spacing={0}>\n            <Grid item xs={12}>\n              <form noValidate autoComplete=\"off\">\n                {this.renderStep(step)}\n              </form>\n            </Grid>\n          </Grid>\n        </div>\n        {!loaded ? (\n          <div className={classes.center}>\n            <CircularProgress className={classes.progress} size={30} thickness={5} />\n          </div>\n        ) : ''}\n        <BottomAppNavigation handleSwitch={this.handleSwitch} step={step} camera={camera} />\n      </>\n    )\n  }\n}\n\nAddPost.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(AddPost);","import { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nclass ScrollToTop extends Component {\n  componentDidUpdate(prevProps) {\n    if (this.props.location.pathname !== prevProps.location.pathname) {\n      window.scrollTo(0, 0);\n    }\n  }\n\n  render() {\n    // return this.props.children;\n    return null;\n  }\n}\n\nexport default withRouter(ScrollToTop);","import React, { Component } from 'react'\nimport PropTypes from 'prop-types';\nimport { auth } from 'helpers/firebase.js';\nimport firebase from '../helpers/firebase';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport FormControl from '@material-ui/core/FormControl';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport LockIcon from '@material-ui/icons/LockOutlined';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Navigation from 'components/Navigation';\nimport BottomAppNavigation from 'components/BottomAppNavigation';\nimport { colors } from '../helpers/colors';\n\nconst styles = theme => ({\n  main: {\n    width: 'auto',\n    display: 'block',\n    marginLeft: theme.spacing.unit * 3,\n    marginRight: theme.spacing.unit * 3,\n    [theme.breakpoints.up(400 + theme.spacing.unit * 3 * 2)]: {\n      width: 400,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    },\n  },\n  paper: {\n    marginTop: theme.spacing.unit * 5,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    padding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\n  },\n  avatar: {\n    margin: theme.spacing.unit,\n    backgroundColor: colors.primary,\n  },\n  form: {\n    width: '100%',\n    marginTop: theme.spacing.unit,\n  },\n  submit: {\n    marginTop: theme.spacing.unit * 3,\n  },\n  typeLink: {\n    marginTop: 20,\n    display: 'flex',\n    flexDirection: 'column',\n    textAlign: 'center'\n  }\n});\n\nclass Login extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      login: '',\n      password: '',\n      username: '',\n      user: null,\n      type: 'login'\n    }\n  }\n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  catchError = (error) => {\n    alert(error.message)\n  }\n\n  login = (email, password) => {\n    auth.setPersistence(firebase.auth.Auth.Persistence.SESSION)\n      .then(() => {\n        return firebase.auth().signInWithEmailAndPassword(email, password)\n      })\n      .then(() => {\n        this.props.history.push('/')\n      })\n      .catch((error) => {\n        this.catchError(error)\n      });\n  }\n\n  register = (email, password) => {\n    auth.createUserWithEmailAndPassword(email, password).catch((error) => { this.catchError(error) }).then(() => {\n      auth.currentUser.updateProfile({\n        displayName: this.state.username\n      })\n      const userId = auth.currentUser.uid;\n      const usersRef = firebase.database().ref('users/' + userId);\n      const color = this.getUserColor();\n      const user = {\n        id: userId,\n        username: this.state.username,\n        email: email,\n        push: false,\n        subscription: false,\n        color: color\n      }\n      usersRef.set(user).then(() => {\n        this.props.history.push('/')\n      });\n    });\n\n  }\n\n  getUserColor = () => {\n    const letters = '0123456789ABCDEF';\n    let color = '#';\n    for (let i = 0; i < 6; i++) {\n      color += letters[Math.floor(Math.random() * 16)];\n    }\n    return color;\n  }\n\n  toggleType = () => {\n    this.setState(({ type }) => ({\n      type: type === \"login\" ? \"register\" : \"login\"\n    }))\n  }\n\n  handleSubmit = (type) => {\n    const { login, password } = this.state;\n    if (type === 'login') {\n      this.login(login, password)\n    } else {\n      this.register(login, password)\n    }\n  }\n\n  componentWillUnmount() {\n    this.setState({\n      login: '',\n      password: '',\n      username: '',\n      user: null\n    })\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { type } = this.state;\n    const switchViewCurrent = (type === 'login') ? 'Zaloguj się' : 'Zarejestruj się';\n    const switchViewButtonText = (type !== 'login') ? 'Zaloguj się' : 'Zarejestruj się';\n    const switchViewButtonDesc = (type !== 'login') ? 'Nie masz jeszcze konta?' : 'Masz już konto?';\n    return (\n      <main className={classes.main}>\n        <Navigation loggedOut={true} />\n        <CssBaseline />\n        <Paper className={classes.paper}>\n          <Avatar className={classes.avatar}>\n            <LockIcon />\n          </Avatar>\n\n          <Typography component=\"h1\" variant=\"h5\">\n            {switchViewCurrent}\n          </Typography>\n\n          <form className={classes.form}>\n            <FormControl margin=\"normal\" required fullWidth>\n              <InputLabel htmlFor=\"email\">Email</InputLabel>\n              <Input id=\"email\" name=\"email\" autoComplete=\"email\" autoFocus onChange={this.handleChange('login')} />\n            </FormControl>\n\n            <FormControl margin=\"normal\" required fullWidth>\n              <InputLabel htmlFor=\"password\">Hasło</InputLabel>\n              <Input name=\"password\" type=\"password\" id=\"password\" autoComplete=\"current-password\" onChange={this.handleChange('password')} />\n            </FormControl>\n\n            {type === 'register' ?\n              <FormControl margin=\"normal\" required fullWidth>\n                <InputLabel htmlFor=\"email\">Login</InputLabel>\n                <Input id=\"username\" name=\"username\" onChange={this.handleChange('username')} />\n              </FormControl>\n              : ''}\n\n            <Button\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.submit}\n              onClick={() => this.handleSubmit(type)}\n            >\n              {switchViewCurrent}\n            </Button>\n\n            <small className={classes.typeLink}>\n              {switchViewButtonDesc}\n              <Button color=\"primary\" className={classes.button} onClick={this.toggleType}>\n                {switchViewButtonText}\n              </Button>\n            </small>\n          </form>\n        </Paper>\n        <BottomAppNavigation loggedOut={true} />\n      </main>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Login);","import { PureComponent } from 'react';\nimport { auth } from '../helpers/firebase';\nimport { getPostsFromIDB } from '../helpers/indexedDB';\n\nexport default class PostContainer extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loaded: false,\n      post: null\n    }\n  }\n\n  componentDidMount() {\n    this.authFirebaseListener = auth.onAuthStateChanged((user) => {\n      if (user) {\n        user.getIdToken().then((token) => {\n          this.getPost(token);\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.authFirebaseListener && this.authFirebaseListener() // Unlisten it by calling it as a function\n  }\n\n  getPost = (token) => {\n    const { id } = this.props;\n    let post;\n    if ('indexedDB' in window) {\n      getPostsFromIDB('posts').then((data) => {\n        for (let postKey in data) {\n          if (data[postKey].id === id) {\n            post = data[postKey];\n          }\n        }\n        this.setState({ post, loaded: true });\n      })\n    }\n\n    const FirebaseREST = require('firebase-rest').default;\n    const jsonClient = new FirebaseREST.JSONClient('https://spot-pwa.firebaseio.com', { auth: token });\n    jsonClient.get('/posts/' + id).then(res => {\n      post = res.body;\n      this.setState({ post, loaded: true });\n    }).catch(err => console.log(err))\n  }\n\n  render() {\n    return this.props.children(this.state.post, this.state.loaded)\n  }\n\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types';\nimport firebase from '../helpers/firebase';\nimport { withStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Dialog from '@material-ui/core/Dialog';\nimport { colors } from '../helpers/colors';\n\nconst styles = theme => ({\n  action: {\n    textAlign: 'center',\n    padding: 0,\n    minWidth: 200\n  },\n  actionList: {\n    padding: 0\n  },\n  border: {\n    borderBottom: '1px solid ' + colors.border\n  }\n});\n\nclass PostActions extends Component {\n  handleDelete = (id) => () => {\n    window.history.go(-1)\n    firebase.database().ref('posts/' + id).remove();\n  }\n\n  render() {\n    const { classes, onClose, selectedValue, id, ...other } = this.props;\n\n    return (\n      <Dialog onClose={() => onClose()} aria-labelledby=\"simple-dialog-title\" {...other}>\n        <div>\n          <List className={classes.actionList}>\n            <ListItem button className={classes.border} onClick={this.handleDelete(id)}>\n              <ListItemText primary=\"Usuń\" className={classes.action} />\n            </ListItem>\n            <ListItem button onClick={onClose}>\n              <ListItemText primary=\"Anuluj\" className={classes.action} />\n            </ListItem>\n          </List>\n        </div>\n      </Dialog>\n    )\n  }\n}\n\nPostActions.propTypes = {\n  classes: PropTypes.object.isRequired,\n  onClose: PropTypes.func,\n  selectedValue: PropTypes.string,\n  id: PropTypes.string.isRequired\n};\n\n\nexport default withStyles(styles)(PostActions);\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Navigation from '../components/Navigation';\nimport BottomAppNavigation from '../components/BottomAppNavigation';\nimport PostContainer from '../containers/PostContainer';\nimport PostCard from 'components/PostCard';\nimport { CircularProgress, Typography } from '@material-ui/core';\nimport PostActions from '../components/PostActions';\n\nconst styles = theme => ({\n  center: {\n    width: '100%',\n    height: '100vh',\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  layout: {\n    [theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n      width: 1100,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    }\n  }\n});\n\nclass Post extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      open: false,\n      selectedValue: '',\n    }\n  }\n\n  handleClickOpen = () => {\n    this.setState({ open: true });\n  };\n\n  handleClose = value => {\n    this.setState({ selectedValue: value, open: false });\n  };\n\n  render() {\n    const { id, classes, user } = this.props;\n    return (\n      <>\n        <PostContainer id={id}>\n          {(post, loaded) => {\n            if (!loaded) {\n              return (\n                <>\n                  <Navigation singlePost={true} />\n                  <div className={classes.layout}>\n                    <div className={classes.center}>\n                      <CircularProgress className={classes.progress} size={30} thickness={5} />\n                    </div>\n                  </div>\n                </>\n              )\n            }\n\n            return (\n              (post.user ? (\n                <>\n                  <Navigation singlePost={true} openActions={post.user.id === user.uid ? this.handleClickOpen : false} />\n                  {post.user.id === user.uid ? (\n                    <PostActions\n                      selectedValue={this.state.selectedValue}\n                      open={this.state.open}\n                      onClose={this.handleClose}\n                      id={id}\n                    />\n                  ) : ''}\n                  <div className={classes.layout}>\n                    <PostCard content={post} />\n                  </div>\n                </>\n              ) : (\n                  <>\n                    <Navigation onlyBack={true} />\n                    <Typography\n                      variant=\"subheading\"\n                      className={classes.center}\n                    >\n                      Ten post nie istnieje!\n                  </Typography>\n                  </>\n                ))\n            )\n\n          }}\n        </PostContainer>\n        <BottomAppNavigation />\n      </>\n    )\n  }\n}\n\n\nPost.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Post);","const urlBase64ToUint8Array = (base64String) => {\n  const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding)\n    .replace(/\\-/g, \"+\")\n    .replace(/_/g, \"/\");\n  const rawData = window.atob(base64);\n  return Uint8Array.from([...rawData].map(char => char.charCodeAt(0)));\n}\n\n\nexport default urlBase64ToUint8Array;","import React, { Component } from 'react'\nimport { Switch, ExpansionPanelDetails, Typography, withStyles } from '@material-ui/core';\nimport urlBase64ToUint8Array from '../helpers/urlBaseToUint';\nimport firebase from '../helpers/firebase';\nimport { colors } from '../helpers/colors';\n\nconst styles = theme => ({\n  pushToggle: {\n    marginTop: 15,\n    marginBottom: 15,\n    background: colors.white,\n    borderBottom: '1px solid ' + colors.border + ' !important',\n    borderTop: '1px solid ' + colors.border + ' !important',\n    paddingBottom: 10,\n    [theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n      borderLeft: '1px solid ' + colors.border + ' !important',\n      borderRight: '1px solid ' + colors.border + ' !important',\n    }\n  },\n  expanded: {\n    width: '100%'\n  },\n  secondaryHeading: {\n    width: '50%',\n    float: 'left',\n    padding: '15px 0'\n  },\n  form: {\n    width: '50%',\n    float: 'right',\n    textAlign: 'right',\n    display: 'flex',\n    justifyContent: 'flex-end'\n  }\n});\n\nclass PushToggle extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      push: false,\n      subscription: false\n    }\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextProps.user !== this.props.user) {\n      this.setState({\n        user: nextProps.user\n      })\n      this.getUserSubscription(nextProps.user.uid)\n    }\n  }\n\n  handleToggle = () => {\n    const currentPush = this.state.push;\n    this.setState({ push: !currentPush });\n    if (currentPush === false) {\n      this.askForNotificationPermission()\n    } else {\n      this.disableNotifications();\n    }\n  };\n\n  configurePushSubscription = () => {\n    //check if this SW handled through this browser have suscription for this device?\n    if (!('serviceWorker' in navigator)) {\n      return;\n    } else {\n      let reg;\n      navigator.serviceWorker.ready\n        .then((swreg) => {\n          reg = swreg;\n          return swreg.pushManager.getSubscription();\n        })\n        .then((sub) => {\n          if (sub === null) {\n            //simmple subscribe() is not safe - anyone can do this, we need to protect our fb endpoint\n            //we will ude VAPID keys with WebPush - it runs on our server so is not visible to users\n            const vapidPublicKey = 'BCpge7IV7kIBHpMQ1ahqFVC0TzobN3sqkN_C5hk3LTrU5ytxj4o2ozTA_vxU-ZHZW8HW0Ldw9JJPfLX6hg-lPkA';\n            const convertedVapidPublicKey = urlBase64ToUint8Array(vapidPublicKey);\n            reg.pushManager.subscribe({\n              userVisibleOnly: true,\n              applicationServerKey: convertedVapidPublicKey\n            });\n          }\n          return sub;\n        })\n        .then((newSub) => {\n          this.setState({\n            subscription: newSub\n          }, () => {\n            this.handleUpdateFirebase()\n            this.displayConfirmNotification()\n          })\n          return true\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    }\n  }\n\n  askForNotificationPermission = () => {\n    Notification.requestPermission((result) => {\n      if (result !== 'granted') {\n      } else {\n        this.configurePushSubscription();\n      }\n    })\n  }\n\n  disableNotifications = () => {\n    this.setState({\n      push: false,\n      subscription: false\n    }, () => {\n      this.handleUpdateFirebase()\n    })\n  }\n\n  displayConfirmNotification = () => {\n    if ('serviceWorker' in navigator) {\n      const options = {\n        body: 'Od teraz będziesz otrzymywać powiadomienie gdy ktoś doda nowy post :)',\n        icon: 'img/icons/icon-96x96.png',\n        vibrate: [100, 50, 200],\n        badge: 'img/icons/icon-96x96.png',\n        tag: 'confirm-notification',\n        renotify: false,\n        actions: [\n          {\n            action: 'confrim',\n            title: 'OK'\n          }\n        ]\n      }\n      navigator.serviceWorker.ready.then((swreg) => {\n        swreg.showNotification('Włączono powiadomienia!', options);\n      })\n    }\n  }\n\n  getUserSubscription = (userId) => {\n    this.userRef = firebase.database().ref('users/' + userId);\n\n    this.userRef.on('value', (snapshot) => {\n      const subscription = snapshot.val().subscription;\n      const push = snapshot.val().push;\n      this.setState({ push, subscription })\n    });\n  }\n\n  handleUpdateFirebase = () => {\n    const userId = this.state.user.uid;\n    firebase.database().ref('users/' + userId).update({\n      push: this.state.push,\n      subscription: this.state.subscription\n    })\n  };\n\n\n  render() {\n    const { push } = this.state;\n    const { classes } = this.props;\n    return (\n      <ExpansionPanelDetails className={classes.pushToggle}>\n        <div className={classes.expanded}>\n          <Typography className={classes.secondaryHeading}>Powiadomienia</Typography>\n          <div className={classes.form}>\n            <Switch\n              checked={push}\n              onChange={() => this.handleToggle()}\n              value={!push}\n            />\n          </div>\n        </div>\n      </ExpansionPanelDetails>\n    )\n  }\n}\n\n\nexport default withStyles(styles)(PushToggle);","import React, { Component } from 'react'\nimport firebase from '../helpers/firebase';\nimport BottomAppNavigation from '../components/BottomAppNavigation';\nimport Navigation from '../components/Navigation';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { Button, TextField, Divider, ExpansionPanelActions } from '@material-ui/core';\nimport { auth } from '../helpers/firebase';\nimport classnames from 'classnames';\nimport PushToggle from '../components/PushToggle';\nimport { colors } from '../helpers/colors';\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n    overflowX: 'hidden',\n    minHeight: '-webkit-fill-available',\n    [theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n      width: 800,\n      marginLeft: 'auto',\n      marginRight: 'auto',\n    }\n  },\n  panel: {\n    margin: '15px 0 !important',\n    boxShadow: 'none',\n    borderBottom: '1px solid ' + colors.border + ' !important',\n    borderTop: '1px solid ' + colors.border + ' !important',\n    [theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n      borderLeft: '1px solid ' + colors.border + ' !important',\n      borderRight: '1px solid ' + colors.border + ' !important',\n    }\n  },\n  panelButton: {\n    boxShadow: 'none',\n    borderBottom: '1px solid ' + colors.border + ' !important',\n    borderTop: '1px solid ' + colors.border + ' !important',\n    width: '100%',\n    textAlign: 'left',\n    padding: '15px 24px',\n    justifyContent: 'flex-start',\n    textTransform: 'none',\n    fontWeight: 'normal',\n    marginBottom: 15,\n    background: colors.white,\n    [theme.breakpoints.up(1100 + theme.spacing.unit * 3 * 2)]: {\n      borderLeft: '1px solid ' + colors.border + ' !important',\n      borderRight: '1px solid ' + colors.border + ' !important',\n    }\n  },\n  red: {\n    color: colors.red\n  },\n  heading: {\n    flexBasis: '40%',\n    flexShrink: 0,\n  },\n  secondaryHeading: {\n    color: colors.textGray,\n  },\n  textField: {\n    margin: 0,\n    width: '100%',\n    borderRadius: '4px 0 0 4px',\n  },\n  form: {\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'space-between',\n    marginTop: 15\n  },\n  expanded: {\n    width: '100%'\n  },\n  iconSmall: {\n    color: colors.primary\n  },\n  button: {\n    background: colors.background,\n    border: '1px solid rgba(0, 0, 0, .2)',\n    borderLeft: 0,\n    borderRadius: '0 4px 4px 0'\n  }\n});\n\nclass Settings extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      expanded: null,\n      login: null,\n      email: null,\n      password: null,\n      newLogin: null,\n      newEmail: null,\n      newPassword: null,\n      push: false\n    };\n  }\n\n  componentDidMount() {\n    this.authFirebaseListener = auth.onAuthStateChanged((user) => {\n      this.setState({\n        user,\n        login: user.displayName,\n        email: user.email\n      })\n    });\n  }\n\n  componentWillUnmount() {\n    this.authFirebaseListener && this.authFirebaseListener()\n  }\n\n  toggleExpand = panel => (expanded) => {\n    this.setState({\n      expanded: expanded ? panel : false,\n    });\n  };\n\n  handleLogout = () => {\n    firebase.auth().signOut().then(() => {\n      window.location.reload()\n    });\n  }\n\n  handleEdit = name => event => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n\n  handleUpdateFirebase = (type) => () => {\n    const { user } = this.state;\n    if (type === 'email') {\n      firebase.database().ref('users/' + user.uid).update({ email: this.state.newEmail })\n      firebase.auth().currentUser.updateEmail(this.state.newEmail);\n    } else if (type === 'login') {\n      firebase.database().ref('users/' + user.uid).update({ username: this.state.newLogin })\n      firebase.auth().currentUser.updateProfile({ displayName: this.state.newLogin })\n    }\n    this.setState({\n      expanded: null\n    })\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { expanded, login, email, user } = this.state;\n    const settings = [\n      {\n        type: 'login',\n        new: 'newLogin',\n        heading: 'Login',\n        placeholder: login,\n        description: 'Zmień nazwę użytkownika:'\n      },\n      {\n        type: 'email',\n        new: 'newEmail',\n        heading: 'Email',\n        placeholder: email,\n        description: 'Zmień swój adres e-mail:'\n      },\n      {\n        type: 'password',\n        new: 'newPassword',\n        heading: 'Zmień hasło',\n        placeholder: '',\n        description: 'Zmień hasło:'\n      }\n    ]\n    return (\n      <>\n        <Navigation onlyBack={true} />\n        <div className={classes.root}>\n          {settings.map((setting, index) =>\n            <ExpansionPanel key={index} expanded={expanded === 'panel' + (index + 1)} onChange={this.toggleExpand('panel' + (index + 1))} className={classes.panel}>\n              <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\n                <Typography className={classes.heading}>{setting.heading}</Typography>\n                <Typography className={classes.secondaryHeading}>{setting.placeholder}</Typography>\n              </ExpansionPanelSummary>\n              <div>\n                <ExpansionPanelDetails>\n                  <div className={classes.expanded}>\n                    <Typography className={classes.secondaryHeading}>{setting.description}</Typography>\n                    <div className={classes.form}>\n                      <TextField\n                        id={`outlined-name-${index}`}\n                        label={setting.heading}\n                        className={classes.textField}\n                        onChange={this.handleEdit(setting.new)}\n                        margin=\"normal\"\n                        variant=\"outlined\"\n                        type={setting.type === 'password' ? 'password' : 'text'}\n                      />\n                    </div>\n                  </div>\n                </ExpansionPanelDetails>\n                <Divider />\n                <ExpansionPanelActions>\n                  <Button size=\"small\" onClick={this.toggleExpand('panel' + (index + 1))}>Anuluj</Button>\n                  <Button size=\"small\" color=\"primary\" onClick={this.handleUpdateFirebase(setting.type)}>Zapisz</Button>\n                </ExpansionPanelActions>\n              </div>\n            </ExpansionPanel>\n          )}\n          {'Notification' in window ? (\n            <PushToggle user={user} />\n          ) : ''}\n          <Button className={classnames(classes.panelButton, classes.red)} onClick={this.handleLogout}>Wyloguj się</Button>\n        </div>\n        <BottomAppNavigation />\n      </>\n    )\n  }\n}\n\nSettings.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Settings);","import React from 'react'\nimport Redirect from 'react-router-dom/Redirect';\nimport { Route } from 'react-router-dom';\n\nexport default ({ isLogged, user, component: Component, ...rest }) => (\n  <Route\n    {...rest}\n    render={props => isLogged\n      ? <Component {...props} user={user} />\n      :\n      <Redirect\n        to={{\n          pathname: \"/login\",\n          state: { from: props.location }\n        }}\n      />\n    }\n  />\n);","import React, { Component } from 'react'\nimport { withStyles } from '@material-ui/core';\nimport { colors } from '../helpers/colors';\n\nconst styles = theme => ({\n  center: {\n    width: '100%',\n    height: '100vh',\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    background: colors.background,\n    zIndex: 1\n  }\n});\n\nclass Loading extends Component {\n  render() {\n    const { classes } = this.props;\n    return (\n      <div className={classes.center}>\n        <img src=\"img/icons/icon-144x144.png\" alt=\"\" />\n      </div>\n    )\n  }\n}\n\nexport default withStyles(styles)(Loading);","import React, { Component } from 'react'\nimport {\n  HashRouter,\n  Route\n} from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core';\nimport Home from 'layouts/Home';\nimport Profile from 'layouts/Profile';\nimport AddPost from 'layouts/AddPost';\nimport ScrollToTop from 'components/ScrollToTop';\nimport Login from 'layouts/Login';\nimport './App.css';\nimport { auth } from './helpers/firebase';\nimport Post from './layouts/Post';\nimport Settings from './layouts/Settings';\nimport PrivateRoute from './components/PrivateRoute'\nimport Loading from './components/Loading';\n\nconst styles = theme => ({\n  container: {\n    paddingTop: 50,\n    paddingBottom: 50,\n    minHeight: '100vh',\n    boxSizing: 'border-box',\n    [theme.breakpoints.up('sm')]: {\n      paddingTop: 80,\n    },\n  }\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      isLogged: false,\n      loading: true,\n      auth: null\n    }\n  }\n\n  componentDidMount() {\n    this.authFirebaseListener = auth.onAuthStateChanged((user) => {\n      if (user) {\n        user.getIdToken().then((token) => {\n          this.setState({ user, isLogged: true, auth: token, loading: false })\n        });\n      } else {\n        this.setState({ loading: false })\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.authFirebaseListener && this.authFirebaseListener() // Unlisten it by calling it as a function\n  }\n\n  getAppContent = () => {\n    const { user, isLogged, loading, auth } = this.state;\n    const { classes } = this.props;\n    return (\n      loading ? (\n        <Loading />\n      ) : (\n          <div className={classes.container}>\n            <ScrollToTop />\n            <Route auth={auth} exact path=\"/\" component={Home} />\n            <Route auth={auth} exact path=\"/post/:id\" component={({ match }) => <Post id={match.params.id} user={user} />} />\n            <PrivateRoute isLogged={isLogged} exact path=\"/profile\" component={Profile} user={user} />\n            <PrivateRoute isLogged={isLogged} exact path=\"/add\" component={AddPost} user={user} />\n            <PrivateRoute isLogged={isLogged} exact path=\"/settings\" component={Settings} user={user} />\n            <Route exact path=\"/login\" component={Login} />\n          </div>\n        )\n    )\n  }\n\n  render() {\n    return (\n      <HashRouter basename={process.env.PUBLIC_URL}>\n        {this.getAppContent()}\n      </HashRouter>\n    )\n  }\n}\n\nApp.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n\n//register custom service worker with workbox\nif ('serviceWorker' in navigator) {\n    // Use the window load event to keep the page load performant\n    window.addEventListener('load', () => {\n        navigator.serviceWorker.register(window.location.origin === 'https://totoczko.github.io' ? 'https://totoczko.github.io/spotick/sw.js' : 'http://localhost:3000/sw.js');\n    });\n}"],"sourceRoot":""}